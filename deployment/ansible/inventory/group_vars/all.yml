# NOMAD Web GUI - Ansible Variables
# Sensitive values should be passed via environment variables

# Hetzner Cloud configuration
hetzner:
  api_token: "{{ lookup('env', 'HETZNER_API_TOKEN') }}"
  server_type: cx22              # 2 vCPU, 4GB RAM (~â‚¬4.50/mo)
  location: fsn1                 # Falkenstein, Germany (or nbg1, hel1)
  image: ubuntu-24.04
  ssh_key_name: nomad-deploy
  server_name: nomad-web-gui
  firewall_name: nomad-web-gui-fw

# Application configuration
app:
  name: nomad-web-gui
  domain: "{{ lookup('env', 'NOMAD_DOMAIN') | default('', true) }}"
  api_token: "{{ lookup('env', 'NOMAD_WEB_API_TOKEN') }}"
  secret_key: "{{ lookup('env', 'NOMAD_SECRET_KEY') | default(lookup('password', '/dev/null length=32 chars=ascii_letters,digits'), true) }}"
  share_expiry_hours: 72
  debug: false

# Docker configuration
docker:
  compose_version: "2.24.0"
  image_name: nomad-web-gui
  image_tag: latest
  container_name: nomad-web-intake

# Caddy configuration
caddy:
  email: "{{ lookup('env', 'LETSENCRYPT_EMAIL') | default('', true) }}"

# Paths on remote server
paths:
  app: /opt/nomad-web-gui
  data: /opt/nomad-web-gui/data
  backups: /opt/nomad-web-gui/backups

# Backup configuration
backup:
  enabled: true
  retention_days: 30
  local_destination: ./backups/
